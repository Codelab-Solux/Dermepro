{% load static %}
<!--  -->

<div
  hx-get="{% url 'appointment' obj.id %}"
  hx-target=".appointment_details"
  hx-swap="innerHTML"
  class="cursor-pointer hidden relative md:flex flex-col border bg-white focus:border-amber-300 hover:border-amber-300 hover:shadow-md w-full rounded-lg group transition duration-300 ease-in-out"
>
  <!-- admin functions update + delete -->
  {% if user.role.sec_level >= 4 %}
  <div class="flex absolute top-0 right-0 text-gray-300 text-xs">
    <button
      onclick="hide_dialogs()"
      hx-target="#basic_dialog"
      hx-get="{% url 'edit_appointment' obj.id %}"
      class="px-2 py-1 hover:bg-purple-300 border border-t-0 rounded-bl-md hover:text-black"
    >
      <i class="fa-solid fa-pen-to-square"></i>
    </button>
    <button
      hx-confirm="Voulez vous vraiment supprimer ceci?"
      class="px-2 py-1 hover:bg-red-300 border-b rounded-tr-lg hover:text-black"
      hx-delete="{% url 'delete_appointment' obj.id %}"
    >
      <i class="fa-solid fa-trash"></i>
    </button>
  </div>
  {% endif %}

  <!-- appointment status indicator -->
  <div class="absolute bottom-2 right-1 text-xs">
    {% include 'base/components/status_badge.html' %}
  </div>

  <!-- card info -->

  <article class="p-4 md:text-sm lg:text-md flex flex-col justify-between">
    <h4 class="text-black font-bold">
      {{obj.guest}}
      <!--  -->
      {% if obj.is_vip == True %}
      <i
        class="fa-solid fa-star text-xs text-gray-300 group-hover:text-amber-300"
      ></i>
      {% endif %}
      <!--  -->
    </h4>
    <span class="italic font-light">@{{obj.host.username}}</span>
    <small class="mb-4 lg:mb-0 text:xs lg:text-sm text-gray-300"
      >{{obj.date}} Ã  {{obj.arrived_at}}</small
    >
  </article>
</div>
