{% extends 'main.html' %} {% load static %} {% block content %}
<div class="p-2">
  <div class="mb-4 p-4 border border-4 border-purple-700 rounded-lg">
    <h1
      class="mb-2 text-black text-lg font-bold bg-purple-100 px-4 py-2 rounded-lg"
    >
      Nouveau Utilisateurs
    </h1>
    <div class="flex flex-col md:flex-row justify-between items-start">
      <div class="grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4">
        {% for e in new_users %}
        <a href="{% url 'user_profile' e.id  %}">
          <div
            class="p-4 text-gray-500 bg-purple-100 h-100 rounded-md hover:shadow-md"
          >
            <h3 class="font-bold text-black text-md">
              {{e.last_name}} {{e.first_name}}
            </h3>
            <p class="font-bold text-purple-900 text-sm">@{{e.username}}</p>
            <!-- <p class="text-sm">{{e.email}}</p> -->
            <p class="text-sm">{{e.tel}}</p>
          </div>
        </a>
        {% endfor %}
      </div>
      <img
        class="h-80"
        src="{% static 'imgs/office.png' %}"
        alt="welcome image"
      />
    </div>
  </div>
  <div class="mt-6 flex flex-col lg:flex-row justify-between gap-8">
    <div class="flex flex-col w-full">
      <h3 class="mb-2 text-black text-lg font-bold">Table des HÃ´tes</h3>
      <div class="overflow-auto rounded-xl text-sm bg-gray-50">
        <table class="w-full text-left db-table">
          <thead class="bg-black text-white">
            <tr>
              <th class="hidden md:inline p-4 text-sm">Pseudo</th>
              <th class="p-4 text-sm">Nom</th>
              <th class="p-4 text-sm">Prenoms</th>
              <th class="hidden md:inline p-4 text-sm">Adresse mail</th>
              <th class="hidden md:inline p-4 text-sm">Adresse</th>
              <th class="hidden md:inline p-4 text-sm">Telephone</th>
              <th class="p-4 text-sm">Role</th>
            </tr>
          </thead>
          <tbody>
            {% for e in users %}
            <tr
              class="text-gray-500 hover:text-black cursor-pointer transition-all duration-50"
            >
              <td class="hidden md:inline p-3">{{e.username}}</td>
              <td class="p-3">{{e.first_name}}</td>
              <td class="p-3">{{e.last_name}}</td>
              <td class="hidden md:inline p-3">{{e.email|truncatechars:20}}</td>
              <td class="hidden md:inline p-3">{{e.address}}</td>
              <td class="hidden md:inline p-3">{{e.tel}}</td>
              <td class="p-3">{{e.role}}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <!-- user creation form -->
    {% if request.user.role == 'admin' %}
    <div class="flex flex-col xs:w-full lg:w-2/6">
      <h3 class="mb-2 text-black text-lg font-bold">Ajouter un utilisateur</h3>
      <form
        class="p-4 w-full bg-gray-100 rounded-lg text-sm"
        method="POST"
        action=""
        enctype="multipart/form-data"
      >
        {% csrf_token %} {% for field in form %}
        <div>
          <h3 class="mb-1">{{field.label}}</h3>
          {{field}}
        </div>
        {% endfor %}
        <input
          class="mt-4 px-4 py-2 bg-black hover:bg-purple-900 text-white rounded-md cursor-pointer"
          type="submit"
          value="Enregistrer"
        />
      </form>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
